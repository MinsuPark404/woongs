

import React, { useState } from 'react';
import { useDrag, useDrop } from 'react-dnd';
import './AdMain.css';

const DraggableImage = () => {
    const [nestedComponents, setNestedComponents] = useState([]);

    const [{ isDragging }, dragRef, previewRef] = useDrag(() => ({
        type: 'widget',
        item: { create: () => <DraggableImage /> },
        collect: (monitor) => ({
            isDragging: monitor.isDragging(),
        }),
    }));

    const [, dropRef] = useDrop({
        accept: 'widget',
        drop: (item, monitor) => {
            if (item && item.create) {
                setNestedComponents(prev => [...prev, item.create]);
            }
        },
    });

    return (
        <div ref={node => dragRef(node) && dropRef(node)} className={`draggable-component ${isDragging ? 'is-dragging' : ''}`}>
            <img src="data:image/jpeg;base64,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" alt="Draggable" style={{ maxWidth: '100%', height: 'auto' }} />
            <div className="nested-components">
                {nestedComponents.map((CreateComponent, index) => (
                    <div key={index}>
                        <CreateComponent />
                    </div>
                ))}
            </div>
        </div>
    );
};

export default DraggableImage;
